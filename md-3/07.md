# 组件化和 React


## 组件化

- 是否做过 React 开发？
- React 以及组件化的一些核心概念
- 实现流程

题目
- 说一下对组件化的理解
- JSX 本质是什么
- JSX 和 vdom 的关系
- 说一下 setState 的过程
- 阐述自己对 React 和 vue 的认识


`*` 用 React 实现 to-do-list



说一下对组件化的理解
- 组件的封装
- 组件的复用

组件的封装
- 视图
- 数据
- 变化逻辑（数据驱动视图变化）

组件的复用
- props 传递
- 复用

总结
- 组件的封装：封装视图、数据、变化逻辑
- 组件的复用：props 传递、复用


## JSX

JSX 本质是什么
- JSX 语法
- JSX 解析成 JS
- 独立的标准


JSX 语法
- html 形式
- 引入 JS 变量和表达式
- if…else…
- 循环
- style 和 className
- 事件


JSX 语法
- JSX 语法根本无法被浏览器所解析
- 那么它如何在浏览器运行？


JSX 解析
- JSX 其实是语法糖
- 开发环境会将 JSX 编译成 JS 代码
- JSX 的写法大大降低了学习成本和编码工作量
- 同时，JSX 也会增加 debug 成本


JSX 独立的标准
- JSX 是 React 引入的，但不是 React 独有的
- React 已经将它作为一个独立标准开放，其他项目也可用
- React.createElement 是可以自定义修改的
- 说明：本身功能已经完备；和其他标准监控和扩展性没问题

```js
// babel-plugin-transform-react-jsx

// babel plugin transform-react-jsx demo.js

/* @jsx h */

// 这个注释可以createElement函数变为h函数
```


总结
- JSX 语法（标签、JS 表达式、判断、循环、事件绑定）
- JSX 是语法糖，需被解析成 JS 才能运行
- JSX 是独立的标准，可被其他项目使用



## jsx和vdom

JSX 和 vdom 的关系
- 分析：为何需要 vdom
- React.createElement 和 h
- 何时 patch ？
- 自定义组件的解析


为何需要 vdom
- vdom 是 React 初次推广开来的，结合 JSX
- JSX 就是模板，最终要渲染成 html
- 初次渲染 + 修改 state 后的 re-render
- 正好符合 vdom 的应用场景


何时 patch
- 初次渲染 - ReactDOM.render(<App/>, container)
- 会触发 patch(container, vnode)
- re-render - setState
- 会触发 patch(vnode, newVnode)


自定义组件的解析
- ‘div’ - 直接渲染 <div> 即可，vdom 可以做到
- Input 和 List ，是自定义组件（class），vdom 默认不认识
- 因此 Input 和 List 定义的时候必须声明 render 函数
- 根据 props 初始化实例，然后执行实例的 render 函数
- render 函数返回的还是 vnode对象



总结
- 为何需要 vdom ： JSX 需要渲染成 html，数据驱动视图
- React.createElement 和 h ，都生成 vnode
- 何时 patch： ReactDOM.render(…) 和 setState
- 自定义组件的解析：初始化实例，然后执行 render







