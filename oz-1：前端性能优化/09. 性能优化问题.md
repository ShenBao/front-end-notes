# 介绍

## Web 加载&渲染基本原理

问题： 从输入 URL 到页面加载显示完成都发生了什么？

分析

- 知识点光，区分度高
- 自己擅长的点可以适当展开
- 渲染过程是重点

解答

1. UI thread：搜索 Or URL？搜索引擎 or 站点请求

![09_105938.png](./img/09_105938.png)

2. Network thread

![09_110231.png](./img/09_110231.png)

3. Renderer process

![09_110536.png](./img/09_110536.png)

4. Render process

![09_110713.png](./img/09_110713.png)

## 首屏加载优化

问题： 什么是首屏加载？怎么优化？

分析：

- web 增量加载的特点决定了首屏性能不会完美
- 过长的白屏影响用户体验和存留
- 首屏 (above the fold) - > 初次印象

解答：

首屏 - 用户加载体验的 3 个关键时刻

![09_113003.png](./img/09_113003.png)

![09_113134.png](./img/09_113134.png)

![09_113256.png](./img/09_113256.png)

## JavaScript 内存管理

问题：JS 是怎样管理内存的？什么情况会造成内存泄露？

分析：

- 内存泄露严重影响性能
- 高级语言 != 不需要管理内存

解答：

变量创建时自动分配内存，不使用时“自动”释放内存 - GC

![09_113935.png](./img/09_113935.png)

内存释放的主要问题是如何确定不再需要使用的内存

所有的 GC 都是近似实现，只能通过判断变量释放还能再次访问到

局部变量，函数执行完，没有闭包引用，就会被标记回收

全局变量，直至浏览器卸载页面时释放

引用次数 - 无法解决循环引用的问题

标记清除

![09_114340.png](./img/09_114340.png)

日常开发注意：

1. 避免意外的全局变量产生

   ![09_114619.png](./img/09_114619.png)

2. 避免反复运行引发大量闭包

   ![09_114753.png](./img/09_114753.png)

3. 避免脱离的 DOM 元素

   ![09_114921.png](./img/09_114921.png)
